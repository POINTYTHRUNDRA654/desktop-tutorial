import{c as ne,r as i,j as e,y as Oe,C as re,s as Me,d as le}from"./index-CEqdjNqX.js";import{C as De}from"./chevron-down-HPljEmI-.js";import{S as Ie}from"./search-CnzEPZHT.js";import{L as Ee}from"./lock-DPhdJk5y.js";import{G as _e}from"./globe-CgGhV6Zw.js";import{T as F}from"./triangle-alert-zWUHrt1_.js";import{U as Fe}from"./upload-CcCAxFJ0.js";import{C as R}from"./clipboard-0cBvso-N.js";import{H as Re}from"./hard-drive-DHH0ZOHn.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],oe=ne("archive",Ue);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],Le=ne("file-plus",Ve),U=[],Xe=()=>{var ee;const[u,m]=i.useState(()=>{const t=typeof window<"u"?window.localStorage.getItem("vault-assets-v1"):null;if(!t)return U;try{const a=JSON.parse(t);return Array.isArray(a)&&a.length>0?a:U}catch{return U}}),[V,ce]=i.useState(""),[O,ie]=i.useState("all"),[y,M]=i.useState("all"),[w,D]=i.useState("all"),[L,de]=i.useState(!1),[I,z]=i.useState(new Set),T=i.useRef(null),[E,xe]=i.useState(!1),[J,pe]=i.useState(!1),h=(ee=window.electron)==null?void 0:ee.api,[j,W]=i.useState(()=>{try{return JSON.parse(localStorage.getItem("vault-tool-paths-v1")||"{}")}catch{return{}}}),[G,ue]=i.useState({}),[k,me]=i.useState(()=>{try{return JSON.parse(localStorage.getItem("vault-tool-extra-args-v1")||"{}")}catch{return{}}}),[d,N]=i.useState(()=>{const t=typeof window<"u"?window.localStorage.getItem("vault-presets-v1"):null;if(t)try{return JSON.parse(t)}catch{}return{meshesBase:"Data/Meshes",texturesBase:"Data/Textures",audioBase:"Data/Sound/Voice",voiceProject:"MyCompanion.esp",scriptsBase:"Data/Scripts",scriptsSource:"Data/Scripts/Source",uiBase:"Data/Interface"}}),[P,he]=i.useState(()=>{try{return JSON.parse(localStorage.getItem("vault-auto-convert-images-v1")||"false")}catch{return!1}}),K={mesh:{tool:"Splicer + OutfitStudio",command:'splicer validate --recalc-normals --rebuild-collision "{source}" -o "{target}"',patterns:["collision","normal","bhk"]},texture:{tool:"texconv",command:'texconv -f <fmt> -o "Data/Textures" "{source}"',patterns:["bc","compression","dds","mipmap"]},audio:{tool:"xWMAEncode",command:'xWMAEncode "{source}" "{target}" --bitrate 192k',patterns:["lufs","normalize","xwm"]},script:{tool:"PapyrusCompiler",command:'PapyrusCompiler "{source}" -f="Institute_Papyrus_Flags.flg" -i="Data/Scripts/Source" -o="Data/Scripts"',patterns:["import","compile","pex"]},ui:{tool:"Scaleform Export",command:'gfxexport "{source}" -o "{target}"',patterns:["swf","export","interface"]}},ge=t=>{const a=t.toLowerCase().split(".").pop()||"";return["nif","fbx","obj"].includes(a)?"mesh":["dds","png","tga","jpg","jpeg"].includes(a)?"texture":["wav","mp3","ogg","xwm"].includes(a)?"audio":["psc","pex","bat","cmd"].includes(a)?"script":["swf","psd","ai","fla"].includes(a)?"ui":"mesh"},fe=(t,a)=>{const s=a.replace(/\\/g,"/").split("/").pop()||a,r=s.includes(".")?s.slice(0,s.lastIndexOf(".")):s,l=s.toLowerCase().split(".").pop()||"";return t==="mesh"?`${d.meshesBase}/${r}.nif`:t==="texture"?`${d.texturesBase}/${r}.dds`:t==="audio"?`${d.audioBase}/${d.voiceProject}/${r}.xwm`:t==="script"?["bat","cmd"].includes(l)?`${d.scriptsBase}/${s}`:`${d.scriptsBase}/${r}.pex`:`${d.uiBase}/${r}.swf`},be=t=>{if(!t)return[];const a=[];let s="",r=null;for(let l=0;l<t.length;l++){const o=t[l];r?o===r?r=null:s+=o:o==='"'||o==="'"?r=o:o===" "?s&&(a.push(s),s=""):s+=o}return s&&a.push(s),a},q=t=>{const a=t.expectedFormat,s=(t.name||"").toLowerCase(),r=(t.tags||[]).map(l=>l.toLowerCase());return a&&a!=="AUTO"?a==="BC1"?"BC1_UNORM":a==="BC3"?"BC3_UNORM":"BC5_UNORM":r.includes("normal")||/(^|[_-])n($|\b)/.test(s)||s.includes("_n.")?"BC5_UNORM":r.includes("alpha")||s.includes("alpha")?"BC3_UNORM":(r.includes("albedo")||/(^|[_-])d($|\b)/.test(s)||s.includes("_d."),"BC1_UNORM")},je=t=>!t||Number.isNaN(t)?"0 MB":`${(t/(1024*1024)).toFixed(1)} MB`,Ne=async t=>{var te,se,ae;const a=K[t.type],s=a.tool==="Splicer + OutfitStudio"?"splicer":a.tool,r=j[s]||s;if(!j[s]){const c=`Tool "${s}" not configured. Please set the tool path in the configuration panel below.`;return console.warn("[TheVault]",c),{remaining:t.issues,log:`âŒ ${c}

ðŸ’¡ Tip: Scroll down to "Tool Paths & Configuration" and click "Browse" to select ${s}.exe`,exitCode:-1}}let l=[];if(t.type==="mesh")l=["validate","--recalc-normals","--rebuild-collision",t.sourcePath,"-o",t.targetPath];else if(t.type==="texture"){const c=q(t),C=(t.sourcePath.split(".").pop()||"").toLowerCase();if(["png","tga","targa","jpg","jpeg"].includes(C)&&!P){const S=`Auto-convert disabled for images; expected ${c.replace("_UNORM","")} when converted.`;return{remaining:t.issues.filter(Ae=>!/unexpected bc format/i.test(Ae)),log:S,exitCode:0}}l=["-nologo","-y","-f",c,"-o",d.texturesBase],l.push(t.sourcePath)}else t.type==="audio"?l=[t.sourcePath,t.targetPath,"--bitrate","192k"]:t.type==="script"?l=[t.sourcePath,`-f=${ve("Institute_Papyrus_Flags.flg")}`,`-i=${d.scriptsSource}`,`-o=${d.scriptsBase}`]:t.type==="ui"&&(l=[t.sourcePath,"-o",t.targetPath]);const o=k[s];o&&o.trim().length&&(l=[...l,...be(o.trim())]);const g=`${a.tool} -> ${a.command.replace("{source}",t.sourcePath).replace("{target}",t.targetPath)}`;let p="",x="",n=-1;const A=(te=window.electron)==null?void 0:te.api;if(A!=null&&A.runTool)try{const c=await A.runTool({cmd:r,args:l});p=c.stdout||"",x=c.stderr||"",n=c.exitCode}catch(c){(se=c==null?void 0:c.message)!=null&&se.includes("ENOENT")||(ae=c==null?void 0:c.toString())!=null&&ae.includes("ENOENT")?x=`âŒ Tool executable not found: "${r}"

The file path appears to be incorrect or the tool is not installed.

ðŸ’¡ Please check:
1. The tool path is correct (use Browse button)
2. The .exe file exists at that location
3. You have permission to run the executable`:x=`Error running tool: ${String(c)}`,n=-1}else p=`âš ï¸ Desktop Bridge not available - tool execution requires Electron app.

Running in web-only mode. To use external tools, please run the Electron desktop app.`,n=0;const _=[g,p,x].filter(Boolean).join(`
`),f=[],$e=_.toLowerCase();if(t.issues.forEach(c=>{K[t.type].patterns.some(v=>$e.includes(v))||f.push(c)}),t.type==="texture"){const c=_.match(/\bBC(1|3|5)\b/i),C=q(t);if(c){const v=`BC${c[1]}_UNORM`;if(v.toUpperCase()===C.toUpperCase()){const S=f.filter(B=>!/compression not validated/i.test(B)&&!/unexpected bc format/i.test(B));f.splice(0,f.length,...S)}else{const S=`Unexpected BC format: expected ${C.replace("_UNORM","")}, got ${v.replace("_UNORM","")}`;f.some(B=>B.toLowerCase().includes("unexpected bc format"))||f.push(S)}}else f.some(v=>/compression not validated/i.test(v))||f.push("Compression not validated")}return{remaining:f,log:_,exitCode:n}},ve=t=>t,H=t=>{if(!t||t.length===0)return;const a=[];Array.from(t).forEach(s=>{const r=ge(s.name),l=s.name.toLowerCase().split(".").pop()||"";let o=[];r==="texture"?o=["Compression not validated"]:r==="audio"?o=["Normalize to -16 LUFS before encode"]:r==="script"?["bat","cmd"].includes(l)?o=["Ready for knowledge ingestion"]:o=["Compile path not set"]:r==="ui"?o=["Export to SWF pending"]:o=["Collision not validated"],a.push({id:`${r}-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,name:s.name,type:r,sourcePath:s.path||s.name,targetPath:fe(r,s.name),size:je(s.size),privacy:"local",tags:[r],staged:!1,lastVerified:"Not run",issues:o,lastRun:""})}),m(s=>[...a,...s])};i.useEffect(()=>{var a,s;if(typeof window>"u")return;window.localStorage.setItem("vault-assets-v1",JSON.stringify(u));const t=(a=window.electron)==null?void 0:a.api;(s=t==null?void 0:t.saveVaultManifest)==null||s.call(t,u).catch(()=>{})},[u]),i.useEffect(()=>{typeof window>"u"||window.localStorage.setItem("vault-presets-v1",JSON.stringify(d))},[d]),i.useEffect(()=>{localStorage.setItem("vault-tool-paths-v1",JSON.stringify(j)),(async()=>{if(!(h!=null&&h.getToolVersion))return;const t=Object.entries(j),a={};for(const[s,r]of t)if(r)try{a[s]=await h.getToolVersion(r)}catch{a[s]=""}ue(a)})()},[j]),i.useEffect(()=>{localStorage.setItem("vault-tool-extra-args-v1",JSON.stringify(k))},[k]),i.useEffect(()=>{localStorage.setItem("vault-auto-convert-images-v1",JSON.stringify(P))},[P]),i.useEffect(()=>{var a,s;const t=(a=window.electron)==null?void 0:a.api;(s=t==null?void 0:t.loadVaultManifest)==null||s.call(t).then(r=>{Array.isArray(r)&&r.length&&m(r)}).catch(()=>{})},[]);const Y=u.filter(t=>{const a=(V||"").toLowerCase(),s=(t.name||"").toLowerCase().includes(a)||(t.tags||[]).some(x=>x.toLowerCase().includes(a)),r=O==="all"||t.type===O,l=y==="all"||t.privacy===y,o=(t.issues||[]).length>0,g=w==="all"||(w==="issues"?o:!o),p=L?t.staged:!0;return s&&r&&l&&g&&p}),b=u.filter(t=>t.staged),Q=u.filter(t=>(t.issues||[]).length>0).length,ye=u.length-Q,we=u.reduce((t,a)=>t+parseFloat(a.size||"0"),0),Ce=t=>{m(a=>a.map(s=>s.id===t?{...s,privacy:s.privacy==="local"?"shared":"local"}:s))},Se=t=>{m(a=>a.map(s=>{if(s.id!==t||s.issues.length>0)return s;if(s.type==="texture"&&!J){const r=(s.sourcePath.split(".").pop()||"").toLowerCase();if(r==="dds")return(async()=>{var l,o,g;try{const p=await((g=(o=(l=window.electron)==null?void 0:l.api)==null?void 0:o.getDdsDimensions)==null?void 0:g.call(o,s.sourcePath));p&&(p.width>4096||p.height>4096)?m(x=>x.map(n=>n.id===s.id?{...n,issues:Array.from(new Set([...n.issues||[],"Texture exceeds 4K"]))}:n)):m(x=>x.map(n=>n.id===s.id?{...n,staged:!n.staged}:n))}catch{}})(),s;if(r==="png"||r==="tga"||r==="targa"||r==="jpg"||r==="jpeg")return(async()=>{var l,o,g;try{const p=await((g=(o=(l=window.electron)==null?void 0:l.api)==null?void 0:o.getImageDimensions)==null?void 0:g.call(o,s.sourcePath));p&&(p.width>4096||p.height>4096)?m(x=>x.map(n=>n.id===s.id?{...n,issues:Array.from(new Set([...n.issues||[],"Texture exceeds 4K"]))}:n)):m(x=>x.map(n=>n.id===s.id?{...n,staged:!n.staged}:n))}catch{}})(),s}return{...s,staged:!s.staged}}))},X=t=>{z(a=>new Set(a).add(t.id)),(async()=>{const{remaining:a,log:s}=await Ne(t);m(r=>r.map(l=>l.id!==t.id?l:{...l,issues:a,lastVerified:new Date().toISOString().slice(0,16).replace("T"," "),lastRun:s,staged:a.length===0?l.staged:!1})),z(r=>{const l=new Set(r);return l.delete(t.id),l})})()},Be=()=>{u.forEach(t=>X(t))},$=t=>{var a;t&&((a=navigator.clipboard)==null||a.writeText(t).catch(()=>{}))},Te=t=>{t.preventDefault(),H(t.dataTransfer.files)},ke=()=>{var t;(t=T.current)==null||t.click()},Pe=t=>{H(t.target.files),T.current&&(T.current.value="")},Z=b.map(t=>`${t.targetPath}`).join(`
`);return e.jsxs("div",{className:"h-full flex flex-col bg-forge-dark text-slate-200",children:[e.jsxs("div",{className:"p-6 border-b border-slate-700 bg-forge-panel flex flex-col gap-4 shadow-md z-10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(Oe,{className:"w-6 h-6 text-forge-accent"}),"The Vault"]}),e.jsx("p",{className:"text-xs text-slate-400 font-mono mt-1",children:"Secure Fallout 4 Asset Library & BA2 staging"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:Be,className:"flex items-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-600 rounded-lg text-sm font-bold transition-colors",children:[e.jsx(re,{className:"w-4 h-4"}),"Verify All"]}),e.jsxs("button",{onClick:()=>$(Z),disabled:b.length===0,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-colors border ${b.length===0?"bg-slate-800 border-slate-700 text-slate-500 cursor-not-allowed":"bg-forge-accent text-slate-900 border-slate-200 shadow-[0_0_15px_rgba(56,189,248,0.3)] hover:bg-sky-400"}`,children:[e.jsx(oe,{className:"w-4 h-4"}),"Copy BA2 Manifest"]})]})]}),e.jsxs("button",{onClick:()=>xe(!E),className:"flex items-center gap-2 text-sm font-semibold text-slate-300 hover:text-white transition-colors py-2",children:[e.jsx(De,{className:`w-4 h-4 transition-transform ${E?"rotate-180":""}`}),"Configuration (Presets & Tools)"]}),E&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3 max-h-96 overflow-y-auto",children:e.jsxs("div",{className:"bg-slate-900/60 border border-slate-800 rounded-xl p-3",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-2 font-semibold",children:"Auto-target Presets"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-slate-500",children:"Meshes"}),e.jsx("input",{value:d.meshesBase,onChange:t=>N(a=>({...a,meshesBase:t.target.value})),className:"bg-slate-950 border border-slate-800 rounded px-2 py-1 text-slate-200"})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-slate-500",children:"Textures"}),e.jsx("input",{value:d.texturesBase,onChange:t=>N(a=>({...a,texturesBase:t.target.value})),className:"bg-slate-950 border border-slate-800 rounded px-2 py-1 text-slate-200"})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-slate-500",children:"Audio Base"}),e.jsx("input",{value:d.audioBase,onChange:t=>N(a=>({...a,audioBase:t.target.value})),className:"bg-slate-950 border border-slate-800 rounded px-2 py-1 text-slate-200"})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-slate-500",children:"Voice Project"}),e.jsx("input",{value:d.voiceProject,onChange:t=>N(a=>({...a,voiceProject:t.target.value})),className:"bg-slate-950 border border-slate-800 rounded px-2 py-1 text-slate-200"})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-slate-500",children:"Scripts Out"}),e.jsx("input",{value:d.scriptsBase,onChange:t=>N(a=>({...a,scriptsBase:t.target.value})),className:"bg-slate-950 border border-slate-800 rounded px-2 py-1 text-slate-200"})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-slate-500",children:"Scripts Source"}),e.jsx("input",{value:d.scriptsSource,onChange:t=>N(a=>({...a,scriptsSource:t.target.value})),className:"bg-slate-950 border border-slate-800 rounded px-2 py-1 text-slate-200"})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-slate-500",children:"UI"}),e.jsx("input",{value:d.uiBase,onChange:t=>N(a=>({...a,uiBase:t.target.value})),className:"bg-slate-950 border border-slate-800 rounded px-2 py-1 text-slate-200"})]}),e.jsxs("label",{className:"flex items-center gap-2 mt-5",children:[e.jsx("input",{type:"checkbox",className:"accent-forge-accent",checked:J,onChange:t=>pe(t.target.checked)}),e.jsx("span",{className:"text-slate-400",children:"Allow >4K textures"})]}),e.jsxs("label",{className:"flex items-center gap-2 mt-2",children:[e.jsx("input",{type:"checkbox",className:"accent-forge-accent",checked:P,onChange:t=>he(t.target.checked)}),e.jsx("span",{className:"text-slate-400",children:"Auto-convert PNG/TGA/JPG to DDS"})]})]}),e.jsxs("div",{className:"bg-slate-900/60 border border-slate-800 rounded-xl p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 mb-2 font-semibold",children:[e.jsx(Me,{className:"w-4 h-4"})," Tool Paths"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:["texconv","xWMAEncode","PapyrusCompiler","gfxexport","splicer"].map(t=>e.jsxs("div",{className:"col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"w-32 text-slate-500 capitalize",children:t}),e.jsx("input",{value:j[t]||"",onChange:a=>W(s=>({...s,[t]:a.target.value})),className:"flex-1 bg-slate-950 border border-slate-800 rounded px-2 py-1 text-slate-200",placeholder:`Path to ${t}.exe`}),e.jsx("button",{onClick:async()=>{var s;const a=await((s=h==null?void 0:h.pickToolPath)==null?void 0:s.call(h,t));a&&W(r=>({...r,[t]:a}))},className:"px-2 py-1 border border-slate-700 rounded hover:border-forge-accent",children:"Browse"}),e.jsx("span",{className:"text-[10px] text-slate-500 w-24 truncate",title:G[t]||"",children:G[t]||""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-32 text-slate-500",children:"Extra args"}),e.jsx("input",{value:k[t]||"",onChange:a=>me(s=>({...s,[t]:a.target.value})),className:"flex-1 bg-slate-950 border border-slate-800 rounded px-2 py-1 text-slate-200",placeholder:"Optional CLI args appended for advanced runs"})]})]},t))})]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[220px] relative",children:[e.jsx(Ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Search assets, tags, or paths",value:V,onChange:t=>ce(t.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-lg pl-10 pr-4 py-2 text-sm focus:outline-none focus:border-forge-accent text-slate-200"})]}),e.jsxs("select",{value:O,onChange:t=>ie(t.target.value),className:"bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-sm focus:outline-none focus:border-forge-accent",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"mesh",children:"Meshes"}),e.jsx("option",{value:"texture",children:"Textures"}),e.jsx("option",{value:"audio",children:"Audio"}),e.jsx("option",{value:"script",children:"Scripts"}),e.jsx("option",{value:"ui",children:"UI"})]}),e.jsxs("div",{className:"flex bg-slate-900 rounded-lg p-1 border border-slate-700",children:[e.jsx("button",{onClick:()=>M("all"),className:`px-3 py-1 text-xs rounded font-medium transition-colors ${y==="all"?"bg-slate-700 text-white":"text-slate-500 hover:text-slate-300"}`,children:"All"}),e.jsxs("button",{onClick:()=>M("local"),className:`px-3 py-1 text-xs rounded font-medium flex items-center gap-1 transition-colors ${y==="local"?"bg-red-900/50 text-red-200":"text-slate-500 hover:text-red-400"}`,children:[e.jsx(Ee,{className:"w-3 h-3"})," Local"]}),e.jsxs("button",{onClick:()=>M("shared"),className:`px-3 py-1 text-xs rounded font-medium flex items-center gap-1 transition-colors ${y==="shared"?"bg-blue-900/50 text-blue-200":"text-slate-500 hover:text-blue-400"}`,children:[e.jsx(_e,{className:"w-3 h-3"})," Shared"]})]}),e.jsxs("div",{className:"flex bg-slate-900 rounded-lg p-1 border border-slate-700",children:[e.jsx("button",{onClick:()=>D("all"),className:`px-3 py-1 text-xs rounded font-medium transition-colors ${w==="all"?"bg-slate-700 text-white":"text-slate-500 hover:text-slate-300"}`,children:"Any Status"}),e.jsx("button",{onClick:()=>D("ready"),className:`px-3 py-1 text-xs rounded font-medium transition-colors ${w==="ready"?"bg-emerald-900/40 text-emerald-200":"text-slate-500 hover:text-emerald-300"}`,children:"Ready"}),e.jsx("button",{onClick:()=>D("issues"),className:`px-3 py-1 text-xs rounded font-medium transition-colors ${w==="issues"?"bg-amber-900/40 text-amber-200":"text-slate-500 hover:text-amber-300"}`,children:"Needs Fix"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-400 bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:L,onChange:t=>de(t.target.checked),className:"accent-forge-accent"}),"Show only staged"]})]}),Object.keys(j).length===0&&e.jsxs("div",{className:"bg-amber-900/20 border border-amber-700/50 rounded-lg p-3 flex items-start gap-3",children:[e.jsx(F,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 text-sm",children:[e.jsx("div",{className:"font-semibold text-amber-200 mb-1",children:"External Tools Not Configured"}),e.jsxs("div",{className:"text-amber-300/80 text-xs",children:["Asset verification requires external tools (texconv, splicer, etc.). Scroll down to ",e.jsx("span",{className:"font-semibold",children:'"Tool Paths & Configuration"'})," to set up your tools."]})]})]}),e.jsxs("div",{onDrop:Te,onDragOver:t=>t.preventDefault(),className:"mt-4 border border-dashed border-slate-600 bg-slate-900/60 rounded-xl p-4 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-slate-800 border border-slate-700",children:e.jsx(Fe,{className:"w-5 h-5 text-forge-accent"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:"Drop assets or import files"}),e.jsx("p",{className:"text-xs text-slate-400",children:"We auto-assign Data/ targets per type (mesh, texture, audio, script, UI)."})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:ke,className:"flex items-center gap-2 px-3 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-600 rounded-lg text-xs font-bold transition-colors",children:[e.jsx(Le,{className:"w-4 h-4"}),"Import files"]}),e.jsx("input",{ref:T,type:"file",multiple:!0,accept:".nif,.fbx,.obj,.dds,.png,.tga,.jpg,.jpeg,.wav,.mp3,.ogg,.xwm,.psc,.pex,.bat,.cmd,.swf,.psd,.ai,.fla",className:"hidden",onChange:Pe})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-[#0c1220]",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-xl p-3",children:[e.jsx("p",{className:"text-[10px] uppercase text-slate-500",children:"Tracked assets"}),e.jsx("p",{className:"text-xl font-bold text-white",children:u.length})]}),e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-xl p-3",children:[e.jsx("p",{className:"text-[10px] uppercase text-slate-500",children:"Staged for BA2"}),e.jsx("p",{className:"text-xl font-bold text-white",children:b.length})]}),e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-xl p-3",children:[e.jsx("p",{className:"text-[10px] uppercase text-slate-500",children:"Ready"}),e.jsx("p",{className:"text-xl font-bold text-emerald-400",children:ye})]}),e.jsxs("div",{className:"bg-slate-900/70 border border-slate-800 rounded-xl p-3",children:[e.jsx("p",{className:"text-[10px] uppercase text-slate-500",children:"With issues"}),e.jsx("p",{className:"text-xl font-bold text-amber-400",children:Q})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-slate-900/60 border border-slate-800 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4 text-forge-accent"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:"Staged BA2 manifest"})]}),e.jsxs("button",{onClick:()=>$(Z),disabled:b.length===0,className:`flex items-center gap-2 px-3 py-1 text-xs rounded border ${b.length===0?"border-slate-700 text-slate-500 cursor-not-allowed":"border-slate-600 text-forge-accent hover:border-forge-accent"}`,children:[e.jsx(R,{className:"w-3 h-3"})," Copy list"]})]}),e.jsx("div",{className:"bg-slate-950/60 border border-slate-800 rounded p-3 h-32 overflow-y-auto text-xs text-slate-300 font-mono",children:b.length===0?e.jsx("p",{className:"text-slate-600",children:"Nothing staged yet. Stage assets to generate an Archive2 list."}):b.map(t=>e.jsxs("div",{className:"flex items-center justify-between py-1 border-b border-slate-800 last:border-b-0",children:[e.jsx("span",{className:"truncate pr-2",children:t.targetPath}),e.jsx("span",{className:"text-[10px] text-slate-500 uppercase",children:t.type})]},t.id))})]}),e.jsxs("div",{className:"bg-slate-900/60 border border-slate-800 rounded-xl p-4 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-white",children:[e.jsx(le,{className:"w-4 h-4 text-emerald-400"})," Security posture"]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-300",children:[e.jsx("span",{children:"Local only"}),e.jsx("span",{className:"font-mono",children:u.filter(t=>t.privacy==="local").length})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-300",children:[e.jsx("span",{children:"Shared"}),e.jsx("span",{className:"font-mono",children:u.filter(t=>t.privacy==="shared").length})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-300",children:[e.jsx("span",{children:"Estimated size tracked"}),e.jsxs("span",{className:"font-mono",children:[we.toFixed(1)," MB"]})]}),e.jsx("p",{className:"text-[11px] text-slate-500",children:"The Vault tracks source (authoring) paths vs staging (Data/) paths to prevent accidental leaks and keep BA2 packaging deterministic."})]})]}),Y.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-600",children:[e.jsx(Re,{className:"w-12 h-12 mb-4 opacity-20"}),e.jsx("p",{children:"No assets match the filters."})]}):e.jsx("div",{className:"flex flex-col gap-3",children:Y.map(t=>{const a=(t.issues||[]).length>0;return e.jsxs("div",{className:`p-4 bg-slate-900/70 border rounded-xl transition-colors ${a?"border-amber-700/60":"border-slate-800"}`,children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1 min-w-[200px]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-white truncate",children:t.name}),e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] uppercase font-bold border ${t.type==="mesh"?"text-blue-300 border-blue-700/60 bg-blue-900/20":t.type==="texture"?"text-purple-200 border-purple-700/60 bg-purple-900/20":t.type==="audio"?"text-amber-200 border-amber-700/60 bg-amber-900/20":t.type==="script"?"text-emerald-200 border-emerald-700/60 bg-emerald-900/20":"text-cyan-200 border-cyan-700/60 bg-cyan-900/20"}`,children:t.type}),e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] uppercase font-bold border ${t.privacy==="local"?"bg-red-900/30 text-red-200 border-red-700/60":"bg-blue-900/30 text-blue-200 border-blue-700/60"}`,children:t.privacy})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(t.tags||[]).map(s=>e.jsxs("span",{className:"px-1.5 py-0.5 bg-slate-800 text-slate-300 rounded text-[10px]",children:["#",s]},s))}),e.jsxs("div",{className:"text-[11px] text-slate-500",children:["Last verified: ",t.lastVerified]}),t.type==="texture"&&e.jsxs("div",{className:"mt-1 flex items-center gap-2 text-[11px] text-slate-400",children:[e.jsx("span",{children:"Expected format:"}),e.jsxs("select",{value:t.expectedFormat||"AUTO",onChange:s=>m(r=>r.map(l=>l.id===t.id?{...l,expectedFormat:s.target.value}:l)),className:"bg-slate-900 border border-slate-700 rounded px-2 py-0.5 text-[11px]",children:[e.jsx("option",{value:"AUTO",children:"Auto"}),e.jsx("option",{value:"BC1",children:"BC1"}),e.jsx("option",{value:"BC3",children:"BC3"}),e.jsx("option",{value:"BC5",children:"BC5"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[11px] text-slate-400",children:t.size}),e.jsxs("label",{className:"flex items-center gap-2 text-[11px] text-slate-400 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.staged,onChange:()=>Se(t.id),className:"accent-forge-accent",disabled:a}),e.jsxs("span",{className:a?"text-slate-600":"",children:["Stage for BA2",a?" (resolve issues first)":""]})]})]})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{className:"bg-slate-950/60 border border-slate-800 rounded p-3 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Source (authoring)"}),e.jsxs("button",{onClick:()=>$(t.sourcePath),className:"text-forge-accent hover:text-white flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3"})," Copy"]})]}),e.jsx("div",{className:"font-mono text-slate-200 truncate",children:t.sourcePath})]}),e.jsxs("div",{className:"bg-slate-950/60 border border-slate-800 rounded p-3 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Staging (Data/)"}),e.jsxs("button",{onClick:()=>$(t.targetPath),className:"text-forge-accent hover:text-white flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3"})," Copy"]})]}),e.jsx("div",{className:"font-mono text-slate-200 truncate",children:t.targetPath})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 items-center",children:[a?e.jsxs("span",{className:"flex items-center gap-1 text-amber-300 text-xs font-semibold",children:[e.jsx(F,{className:"w-4 h-4"})," ",(t.issues||[]).length," issue",(t.issues||[]).length>1?"s":""]}):e.jsxs("span",{className:"flex items-center gap-1 text-emerald-300 text-xs font-semibold",children:[e.jsx(le,{className:"w-4 h-4"})," Ready for archive"]}),e.jsxs("button",{onClick:()=>X(t),disabled:I.has(t.id),className:`px-3 py-1 text-xs rounded border flex items-center gap-1 ${I.has(t.id)?"border-slate-700 text-slate-500 cursor-not-allowed":"border-slate-600 text-white hover:border-forge-accent hover:text-forge-accent"}`,children:[e.jsx(re,{className:"w-3 h-3"})," ",I.has(t.id)?"Verifying...":"Verify"]}),e.jsx("button",{onClick:()=>Ce(t.id),className:"px-3 py-1 text-xs rounded border border-slate-600 text-slate-200 hover:border-forge-accent",children:t.privacy==="local"?"Make shared":"Make local"})]}),t.lastRun&&e.jsx("div",{className:"mt-2 bg-slate-950/60 border border-slate-800 rounded p-3 text-[11px] text-slate-200 whitespace-pre-wrap",children:t.lastRun}),a&&e.jsx("div",{className:"mt-2 bg-amber-900/30 border border-amber-700/60 rounded p-3 text-[11px] text-amber-100 flex flex-col gap-1",children:(t.issues||[]).map((s,r)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(F,{className:"w-3 h-3 mt-0.5"}),e.jsx("span",{children:s})]},r))})]},t.id)})})]})]})};export{Xe as default};
