import{c as C,r as i,j as e,w as W,P as U,x as S,C as V,S as E}from"./index-CEqdjNqX.js";import{D as H}from"./database-V2h3OpNj.js";import{T as q}from"./triangle-alert-zWUHrt1_.js";import{H as X}from"./hard-drive-DHH0ZOHn.js";import{C as D}from"./copy-D3A4jLxT.js";import{L as M}from"./loader-circle-BzIUkhYW.js";import{P as G}from"./play-txtn9UkQ.js";import{D as K}from"./download-BCBaShzR.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],J=C("clipboard-list",Q);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"m2 9 3-3 3 3",key:"1ltn5i"}],["path",{d:"M13 18H7a2 2 0 0 1-2-2V6",key:"1r6tfw"}],["path",{d:"m22 15-3 3-3-3",key:"4rnwn2"}],["path",{d:"M11 6h6a2 2 0 0 1 2 2v10",key:"2f72bc"}]],Z=C("repeat-2",Y),ee=[{id:"mesh-01",name:"Railcar Static Mesh",type:"mesh",sourcePath:"D:/Fallout4Mods/Assets/meshes/railcar_high.nif",targetPath:"Data/Meshes/Workshop/Rail/railcar01.nif",sizeMB:14.2,tags:["static","collision","lod"],status:"new",lastUpdated:"2026-01-10",issues:["Missing bhkCollision","Inconsistent scale (1.2x)"]},{id:"mesh-02",name:"Armor Chestplate",type:"mesh",sourcePath:"D:/Fallout4Mods/Assets/meshes/armor/chestplate_high.nif",targetPath:"Data/Meshes/Armor/Custom/chestplate.nif",sizeMB:9.8,tags:["armor","skin","physics"],status:"in-progress",lastUpdated:"2026-01-08"},{id:"tex-01",name:"Railcar Texture Set",type:"texture",sourcePath:"D:/Fallout4Mods/Assets/textures/railcar/*.png",targetPath:"Data/Textures/Workshop/Rail/railcar01_*.dds",sizeMB:88.4,tags:["albedo","normal","metal"],status:"new",lastUpdated:"2026-01-11",issues:["Albedo 8K → downscale to 2K","Normals in BC1 (wrong compression)"]},{id:"tex-02",name:"Armor Texture Set",type:"texture",sourcePath:"D:/Fallout4Mods/Assets/textures/armor/*.png",targetPath:"Data/Textures/Armor/Custom/armor_*.dds",sizeMB:52.1,tags:["albedo","normal","roughness"],status:"processed",lastUpdated:"2026-01-05"},{id:"audio-01",name:"Workbench VO Lines",type:"audio",sourcePath:"D:/Fallout4Mods/Assets/audio/workbench/*.wav",targetPath:"Data/Sound/Voice/CustomWorkbench/",sizeMB:34.7,tags:["voice","dialogue"],status:"new",lastUpdated:"2026-01-07"},{id:"script-01",name:"Railcar Control Script",type:"script",sourcePath:"D:/Fallout4Mods/Assets/scripts/RailcarControl.psc",targetPath:"Data/Scripts/RailcarControl.pex",sizeMB:.4,tags:["papyrus","workshop"],status:"in-progress",lastUpdated:"2026-01-06"}],x=[{id:"mesh-pipeline",name:"Mesh Processing",description:"Validate, fix physics, optimize LODs, and stage NIFs.",applicable:["mesh"],steps:[{id:"validate-nif",name:"Validate NIF",tool:"Splicer",description:"Check for bad normals, degenerate tris, missing bhkCollision.",command:'splicer validate --input "{source}" --report --strict'},{id:"physics",name:"Regenerate Physics",tool:"Outfit Studio",description:"Rebuild collision and Havok constraints to match mesh scale.",command:'outfitstudio --input "{source}" --regen-physics --output "{target}"'},{id:"lod",name:"Generate LOD",tool:"LODGen",description:"Create LOD meshes and place in Data/Meshes/LOD.",command:'lodgen -o "Data/Meshes/LOD" --source "{target}"'},{id:"package",name:"Stage to Data",tool:"Archive2",description:"Place final NIF into target path and prep BA2 list.",command:'archive2 add "{target}" --list ba2_queue.txt'}]},{id:"texture-pipeline",name:"Texture Processing",description:"Convert, compress, and mipmap DDS textures for runtime.",applicable:["texture"],steps:[{id:"audit",name:"Audit Resolution",tool:"ImageMagick",description:"Downscale oversized sources to target resolution (2K).",command:'magick mogrify -resize 2048x2048 "{source}"'},{id:"convert",name:"Convert to DDS",tool:"texconv",description:"BC1 for albedo, BC5 for normals, BC3 for alpha-bearing maps.",command:'texconv -f BC5_UNORM -o "{targetDir}" "{source}"'},{id:"mipmaps",name:"Generate Mipmaps",tool:"texconv",description:"Add mip levels to prevent shimmering and reduce VRAM spikes.",command:'texconv -m 10 -o "{targetDir}" "{target}"'},{id:"package",name:"Stage to Data",tool:"Archive2",description:"Write DDS to target path and enqueue for BA2.",command:'archive2 add "{target}" --list ba2_queue.txt'}]},{id:"audio-pipeline",name:"Audio Processing",description:"Normalize, convert, and stage dialogue or SFX.",applicable:["audio"],steps:[{id:"normalize",name:"Normalize Loudness",tool:"ffmpeg",description:"LUFS normalization for consistent playback.",command:'ffmpeg -i "{source}" -af loudnorm "{targetDir}/normalized.wav"'},{id:"convert",name:"Convert to XWM",tool:"ffmpeg/xWMAEncode",description:"Encode WAV to XWM for Fallout 4 voice pipeline.",command:'ffmpeg -i "{targetDir}/normalized.wav" -acodec wmav2 "{target}"'},{id:"package",name:"Stage to Data",tool:"Archive2",description:"Place XWM in Data/Sound/Voice and queue for BA2.",command:'archive2 add "{target}" --list ba2_queue.txt'}]},{id:"script-pipeline",name:"Script Compilation",description:"Compile Papyrus scripts and stage bytecode.",applicable:["script"],steps:[{id:"lint",name:"Syntax Check",tool:"PapyrusCompiler",description:"Validate PSC syntax before compilation.",command:'PapyrusCompiler.exe "{source}" -syntax'},{id:"compile",name:"Compile to PEX",tool:"PapyrusCompiler",description:"Emit bytecode to Data/Scripts with import paths resolved.",command:'PapyrusCompiler.exe "{source}" -output "{targetDir}" -import="Data/Scripts/Source"'},{id:"package",name:"Stage to Data",tool:"Archive2",description:"Stage PEX for inclusion in BA2.",command:'archive2 add "{target}" --list ba2_queue.txt'}]}],p=r=>`${r.toFixed(1)} MB`,ce=()=>{var w,P;const[r]=i.useState(ee),[m,k]=i.useState(((w=r[0])==null?void 0:w.id)??null),[h,f]=i.useState([]),[v,j]=i.useState([]),[u,N]=i.useState(!1),[y,A]=i.useState({}),s=i.useMemo(()=>r.find(t=>t.id===m)||null,[r,m]),d=i.useMemo(()=>s&&x.find(t=>t.applicable.includes(s.type))||x[0],[s]),g=i.useMemo(()=>{const t=r.reduce((o,n)=>o+n.sizeMB,0),a=r.filter(o=>o.status==="processed").reduce((o,n)=>o+n.sizeMB,0);return{total:t,processed:a,pending:t-a}},[r]),c=(t,a="info")=>{j(o=>[...o,{timestamp:new Date().toLocaleTimeString(),message:t,level:a}])},B=()=>{if(!s||!d)return;N(!0),j([]),c(`Starting pipeline '${d.name}' for ${s.name}`);const t=d.steps.map(l=>({...l,status:"pending"}));f(t);const a=[],o=performance.now();for(const l of t){const L=400+Math.floor(Math.random()*500),T=s.targetPath.includes("/")?s.targetPath.slice(0,s.targetPath.lastIndexOf("/")):s.targetPath,$=s.sourcePath.includes("/")?s.sourcePath.slice(0,s.sourcePath.lastIndexOf("/")):s.sourcePath,F=l.command.replace("{source}",s.sourcePath).replace("{target}",s.targetPath).replace("{targetDir}",T).replace("{sourceDir}",$),_={...l,status:"completed",output:`${l.tool} ✓`,notes:l.description,durationMs:L};a.push(_),c(`${l.name} completed via ${l.tool}`),c(`Command: ${F}`)}const n=performance.now(),I=Math.max(1,Math.round(n-o));f(a),c(`Pipeline finished. Asset staged to ${s.targetPath}`);const O={id:`run-${Date.now()}`,pipelineId:d.id,durationMs:I,status:"success",timestamp:new Date().toLocaleTimeString()};A(l=>({...l,[s.id]:[O,...l[s.id]||[]].slice(0,5)})),N(!1)},R=t=>{navigator.clipboard.writeText(t),c(`Copied path: ${t}`)},z=i.useMemo(()=>x.filter(t=>s?t.applicable.includes(s.type):!0),[s]),b=i.useMemo(()=>r.filter(t=>t.status==="processed"||t.status==="in-progress"),[r]);return e.jsxs("div",{className:"h-full flex flex-col bg-[#111827] text-slate-200 font-sans overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-black bg-[#1f2937] flex justify-between items-center shadow-md",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-purple-400"}),"The Orchestrator"]}),e.jsx("p",{className:"text-[10px] text-slate-400 font-mono mt-0.5",children:"Asset Processing Pipeline & Shared Storage"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"px-3 py-1.5 bg-black rounded border border-slate-700 text-xs text-slate-300 flex items-center gap-2",children:[e.jsx(H,{className:"w-3 h-3"})," Storage Ready"]})})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-80 border-r border-slate-800 bg-[#0f172a] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-slate-800 bg-[#111827]",children:[e.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wide",children:"Assets"}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"Central storage to reuse across mods"})]}),e.jsx("div",{className:"p-3 space-y-2 overflow-y-auto",children:r.map(t=>e.jsxs("button",{onClick:()=>k(t.id),className:`w-full text-left p-3 rounded border transition-all ${m===t.id?"bg-purple-900/30 border-purple-700/50 ring-1 ring-purple-500/40":"bg-slate-800/30 border-slate-700/50 hover:border-slate-500"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:t.name}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded uppercase ${t.status==="processed"?"bg-green-900/40 text-green-200":t.status==="in-progress"?"bg-yellow-900/40 text-yellow-200":"bg-slate-900/60 text-slate-300"}`,children:t.status})]}),e.jsxs("div",{className:"text-[10px] text-slate-400 mt-1",children:[t.type.toUpperCase()," • ",p(t.sizeMB)]}),e.jsx("div",{className:"flex gap-1 mt-2 flex-wrap",children:t.tags.map(a=>e.jsx("span",{className:"text-[9px] bg-slate-900/60 border border-slate-700/60 text-slate-200 px-1.5 py-0.5 rounded",children:a},a))}),t.issues&&t.issues.length>0&&e.jsxs("div",{className:"mt-2 text-[10px] text-red-300 flex items-start gap-1",children:[e.jsx(q,{className:"w-3 h-3"}),e.jsx("span",{children:t.issues[0]})]})]},t.id))})]}),e.jsx("div",{className:"flex-1 flex flex-col bg-[#0b1220]",children:s&&d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-5 border-b border-slate-800 flex flex-wrap gap-4 items-center bg-[#0f172a]",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold",children:"Selected Asset"}),e.jsx("div",{className:"text-white font-semibold",children:s.name}),e.jsx("div",{className:"text-[11px] text-slate-400",children:s.sourcePath})]}),e.jsxs("div",{className:"flex gap-3 flex-1 min-w-[260px]",children:[e.jsxs("div",{className:"px-3 py-2 rounded border border-slate-700 bg-slate-900 text-xs text-slate-300 flex items-center gap-2",children:[e.jsx(U,{className:"w-3 h-3"})," Target: ",s.targetPath]}),e.jsxs("div",{className:"px-3 py-2 rounded border border-slate-700 bg-slate-900 text-xs text-slate-300 flex items-center gap-2",children:[e.jsx(S,{className:"w-3 h-3"})," ",s.type.toUpperCase()," pipeline"]}),e.jsxs("div",{className:"px-3 py-2 rounded border border-slate-700 bg-slate-900 text-xs text-slate-300 flex items-center gap-2",children:[e.jsx(X,{className:"w-3 h-3"})," ",p(s.sizeMB)]})]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsxs("button",{onClick:()=>R(s.targetPath),className:"px-3 py-2 bg-slate-800 hover:bg-slate-700 rounded border border-slate-700 text-xs font-semibold text-slate-200 flex items-center gap-2 transition-colors",children:[e.jsx(D,{className:"w-3 h-3"})," Copy Path"]}),e.jsxs("button",{onClick:B,disabled:u,className:"px-4 py-2 bg-purple-700 hover:bg-purple-600 rounded border border-purple-500 text-xs font-semibold text-white flex items-center gap-2 transition-colors disabled:opacity-50",children:[u?e.jsx(M,{className:"w-4 h-4 animate-spin"}):e.jsx(G,{className:"w-4 h-4"}),u?"Running":"Run Pipeline"]})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-72 border-r border-slate-800 bg-[#0f172a] p-4 space-y-2 overflow-y-auto",children:[e.jsx("div",{className:"text-[11px] text-slate-400 uppercase font-bold mb-2",children:"Pipelines"}),z.map(t=>e.jsxs("div",{className:`p-3 rounded border ${t.id===d.id?"bg-purple-900/30 border-purple-700/50":"bg-slate-900/40 border-slate-800"}`,children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:t.name}),e.jsx("div",{className:"text-[10px] text-slate-400 mt-1",children:t.description})]},t.id)),e.jsxs("div",{className:"mt-4 text-[10px] text-slate-400 flex items-center gap-2",children:[e.jsx(Z,{className:"w-3 h-3"})," Orchestrator deduplicates overlapping steps automatically."]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-4",children:[h.length===0&&e.jsx("div",{className:"text-center text-slate-500 py-8 text-sm",children:"Initialize the pipeline to see step execution."}),h.map((t,a)=>e.jsxs("div",{className:`p-4 rounded-xl border relative ${t.status==="completed"?"bg-emerald-900/10 border-emerald-600/50":t.status==="running"?"bg-slate-800 border-purple-500/50":t.status==="failed"?"bg-red-900/10 border-red-600/50":"bg-slate-900/40 border-slate-700"}`,children:[a<h.length-1&&e.jsx("div",{className:"absolute left-6 top-full h-4 w-px bg-slate-700"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 ${t.status==="completed"?"border-emerald-500 text-emerald-400":t.status==="running"?"border-purple-500 text-purple-400 animate-pulse":t.status==="failed"?"border-red-500 text-red-400":"border-slate-600 text-slate-500"}`,children:t.status==="completed"?e.jsx(V,{className:"w-5 h-5"}):t.status==="running"?e.jsx(M,{className:"w-5 h-5 animate-spin"}):e.jsx(J,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:t.name}),e.jsx("div",{className:"text-[11px] text-slate-400",children:t.tool})]}),e.jsxs("span",{className:"text-[10px] text-slate-500",children:["Step ",a+1]})]}),e.jsx("p",{className:"text-xs text-slate-300 mt-2",children:t.description}),e.jsxs("div",{className:"mt-2 text-[11px] text-slate-200 bg-black/30 border border-slate-700/60 rounded px-2 py-2",children:[e.jsx("div",{className:"text-[10px] text-slate-400 mb-1",children:"Command"}),e.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-slate-200",children:[e.jsx("span",{className:"truncate",children:t.command.replace("{source}",s.sourcePath).replace("{target}",s.targetPath).replace("{targetDir}",s.targetPath.includes("/")?s.targetPath.slice(0,s.targetPath.lastIndexOf("/")):s.targetPath).replace("{sourceDir}",s.sourcePath.includes("/")?s.sourcePath.slice(0,s.sourcePath.lastIndexOf("/")):s.sourcePath)}),e.jsxs("button",{onClick:()=>navigator.clipboard.writeText(t.command.replace("{source}",s.sourcePath).replace("{target}",s.targetPath).replace("{targetDir}",s.targetPath.includes("/")?s.targetPath.slice(0,s.targetPath.lastIndexOf("/")):s.targetPath).replace("{sourceDir}",s.sourcePath.includes("/")?s.sourcePath.slice(0,s.sourcePath.lastIndexOf("/")):s.sourcePath)),className:"px-2 py-1 bg-slate-800 hover:bg-slate-700 rounded border border-slate-700 text-[10px] text-slate-200 flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3"})," Copy"]})]})]}),t.output&&e.jsxs("div",{className:"mt-2 text-[11px] text-emerald-300 bg-black/40 border border-emerald-700/40 rounded px-2 py-1",children:[t.output,t.durationMs?e.jsxs("span",{className:"ml-2 text-slate-400",children:["(",t.durationMs," ms)"]}):null]})]})]})]},t.id))]})})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-500",children:"Select an asset to orchestrate processing."})}),e.jsxs("div",{className:"w-80 border-l border-slate-800 bg-[#0f172a] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-slate-800 bg-[#111827] flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold",children:"Storage Stats"}),e.jsxs("div",{className:"text-sm text-white",children:["Total ",p(g.total)]})]}),e.jsxs("div",{className:"text-right text-[11px] text-slate-400",children:[e.jsxs("div",{className:"text-green-300",children:["Processed ",p(g.processed)]}),e.jsxs("div",{className:"text-yellow-300",children:["Pending ",p(g.pending)]})]})]}),e.jsxs("div",{className:"p-4 border-b border-slate-800 bg-[#0f172a] space-y-2",children:[e.jsxs("div",{className:"text-[11px] text-slate-300 flex items-center gap-2",children:[e.jsx(E,{className:"w-3 h-3"})," Single orchestrator avoids duplicate processing steps."]}),e.jsxs("div",{className:"text-[11px] text-slate-300 flex items-center gap-2",children:[e.jsx(S,{className:"w-3 h-3"})," Consistent tools: Splicer, texconv, Outfit Studio, PapyrusCompiler."]})]}),e.jsxs("div",{className:"p-4 border-b border-slate-800 bg-[#0f172a] space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold",children:"BA2 Queue"}),e.jsxs("button",{onClick:()=>navigator.clipboard.writeText(b.map(t=>t.targetPath).join(`
`)),className:"px-2 py-1 bg-slate-800 hover:bg-slate-700 rounded border border-slate-700 text-[10px] text-slate-200 flex items-center gap-1",children:[e.jsx(K,{className:"w-3 h-3"})," Copy List"]})]}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:[b.length," assets staged"]}),e.jsx("div",{className:"max-h-24 overflow-y-auto space-y-1 text-[10px] text-slate-300",children:b.map(t=>e.jsx("div",{className:"border border-slate-700 rounded px-2 py-1",children:t.targetPath},t.id))})]}),e.jsxs("div",{className:"p-4 border-b border-slate-800 bg-[#0f172a] space-y-2",children:[e.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold",children:"Run History"}),e.jsx("div",{className:"space-y-1 text-[10px] text-slate-300 max-h-28 overflow-y-auto",children:s&&((P=y[s.id])!=null&&P.length)?y[s.id].map(t=>e.jsxs("div",{className:"border border-slate-700 rounded px-2 py-1 flex justify-between",children:[e.jsx("span",{children:t.timestamp}),e.jsxs("span",{className:"text-slate-400",children:[t.durationMs," ms"]})]},t.id)):e.jsx("div",{className:"text-slate-600 italic",children:"No runs yet."})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 font-mono text-[10px] text-slate-300",children:[v.length===0&&e.jsx("div",{className:"italic text-slate-600",children:"Waiting for pipeline run..."}),v.map((t,a)=>e.jsxs("div",{className:`border-l-2 pl-2 py-1 ${t.level==="error"?"border-red-500 text-red-300":t.level==="warn"?"border-yellow-500 text-yellow-200":"border-slate-700"}`,children:[e.jsx("span",{className:"text-slate-500 mr-2",children:t.timestamp}),t.message]},a))]})]})]})]})};export{ce as default};
