import{r as o,u as b,j as e,S as j}from"./index-CEqdjNqX.js";import{P as w}from"./play-txtn9UkQ.js";import{E as N}from"./external-link-BPyz4xeM.js";const C=({toolKey:u,toolName:s,nexusUrl:i,description:c,className:m})=>{const[d,x]=o.useState(null),[f,h]=o.useState(!1),g=b();o.useEffect(()=>((async()=>{try{const t=await window.electronAPI.getSettings();x(t),window.electronAPI.onSettingsUpdated(a=>x(a))}catch(t){console.warn("[ExternalToolNotice] Failed to load settings",t)}})(),()=>{}),[]);const n=d?d[u]:void 0,r=!!n&&n.trim().length>0,p=async()=>{var l;if(!(!r||!n)){h(!0);try{const t=(l=window.electron)==null?void 0:l.api;if(t!=null&&t.openProgram){const a=await t.openProgram(n);a&&a.success===!1&&alert(`Could not launch ${s}: ${a.error||"Unknown error"}`)}else t!=null&&t.openExternal?await t.openExternal(n):alert("Launching external tools requires the Desktop Bridge (Electron).")}catch(t){console.error("Failed to launch tool:",t),alert(`Could not launch ${s}. Check the configured path in Settings.`)}finally{h(!1)}}};return e.jsxs("div",{className:`rounded-lg border p-3 text-xs ${r?"border-emerald-700 bg-emerald-900/20":"border-slate-700 bg-slate-900/30"} ${m||""}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-white",children:s}),r?e.jsx("span",{className:"text-emerald-400 font-bold",children:"Configured"}):e.jsx("span",{className:"text-slate-400",children:"Not configured"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[r&&e.jsxs("button",{onClick:p,disabled:f,className:"px-2 py-1 bg-emerald-700 hover:bg-emerald-600 border border-emerald-500 rounded text-[11px] font-bold flex items-center gap-1 transition-all disabled:opacity-50",title:`Launch ${s}`,children:[e.jsx(w,{className:"w-3 h-3"})," Launch"]}),e.jsxs("button",{onClick:()=>g("/settings/tools"),className:"px-2 py-1 bg-slate-800 hover:bg-slate-700 border border-slate-600 rounded text-[11px] font-bold flex items-center gap-1 transition-all",title:`Configure ${s} path`,children:[e.jsx(j,{className:"w-3 h-3"})," Configure"]})]})]}),c&&e.jsx("p",{className:"mt-2 text-slate-300",children:c}),i&&e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:i,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 text-blue-400 hover:text-blue-300 font-bold",title:`Download ${s} from Nexus Mods`,children:[e.jsx(N,{className:"w-3 h-3"})," Download from Nexus Mods"]})})]})};export{C as E};
