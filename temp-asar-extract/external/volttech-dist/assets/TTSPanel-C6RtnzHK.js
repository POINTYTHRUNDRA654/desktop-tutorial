import{c as P,r as u,j as e,A as q,S as te,f as ae,m as se,b as le}from"./index-CEqdjNqX.js";import{U as re}from"./upload-CcCAxFJ0.js";import{T as ne}from"./trash-2-hMnUtzOy.js";import{P as oe}from"./play-txtn9UkQ.js";import{D as ce}from"./download-BCBaShzR.js";import{F as ie}from"./folder-_XQVCBIa.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M4 6.835V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-.343",key:"1vfytu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M2 19a2 2 0 0 1 4 0v1a2 2 0 0 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 0 1-4 0v-1a2 2 0 0 1 4 0",key:"1etmh7"}]],E=P("file-headphone",de);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],z=P("music",ue);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],fe=P("sliders-vertical",xe),ye=()=>{const[m,V]=u.useState(null),[I,D]=u.useState(!1),[g,G]=u.useState([]),[w,k]=u.useState(null),[L,W]=u.useState(""),[p,T]=u.useState("none"),[S,$]=u.useState(1),[y,H]=u.useState(0),[C,O]=u.useState(1),[A,Q]=u.useState("16bit-44k"),x=u.useRef(null),R=u.useRef(null),h=u.useRef(null),F=u.useRef(null),B=u.useRef(0),N=u.useRef(null);u.useEffect(()=>(x.current=new(window.AudioContext||window.webkitAudioContext),h.current=x.current.createAnalyser(),h.current.fftSize=256,()=>{var t,a;((t=x.current)==null?void 0:t.state)!=="closed"&&((a=x.current)==null||a.close()),cancelAnimationFrame(B.current)}),[]),u.useEffect(()=>{const t=()=>{if(!F.current||!h.current)return;const a=F.current,l=a.getContext("2d");if(!l)return;const i=h.current.frequencyBinCount,c=new Uint8Array(i);h.current.getByteFrequencyData(c),l.fillStyle="#0f172a",l.fillRect(0,0,a.width,a.height);const s=a.width/i*2.5;let r,o=0;for(let n=0;n<i;n++){r=c[n]/2;const d=l.createLinearGradient(0,a.height,0,a.height-r);p==="radio"?(d.addColorStop(0,"#d97706"),d.addColorStop(1,"#fbbf24")):p==="robot"?(d.addColorStop(0,"#dc2626"),d.addColorStop(1,"#f87171")):p==="ethereal"?(d.addColorStop(0,"#0ea5e9"),d.addColorStop(1,"#a855f7")):(d.addColorStop(0,"#059669"),d.addColorStop(1,"#34d399")),l.fillStyle=d,l.fillRect(o,a.height-r,s,r),o+=s+1}B.current=requestAnimationFrame(t)};t()},[p]);const Y=async t=>{var l;const a=(l=t.target.files)==null?void 0:l[0];if(a)try{const i=await a.arrayBuffer(),s=await(x.current||new window.AudioContext).decodeAudioData(i),r=s.duration,o={name:a.name,buffer:s,duration:r};G([...g,o]),k(g.length),V(s),N.current&&(N.current.value="")}catch(i){console.error("Error loading audio file:",i),alert("Failed to load audio file. Ensure it is a valid WAV, MP3, or OGG file.")}},Z=async()=>{if(!m||!x.current){alert("No audio to export. Load or process audio first.");return}try{const a=x.current.sampleRate,l=m.numberOfChannels,i=m.length,c=A.startsWith("24bit")?3:2,r=44+i*l*c,o=new ArrayBuffer(r),n=new DataView(o),d=(j,v)=>{for(let b=0;b<v.length;b++)n.setUint8(j+b,v.charCodeAt(b))};d(0,"RIFF"),n.setUint32(4,r-8,!0),d(8,"WAVE"),d(12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,l,!0),n.setUint32(24,a,!0),n.setUint32(28,a*l*c,!0),n.setUint16(32,l*c,!0),n.setUint16(34,8*c,!0),d(36,"data"),n.setUint32(40,r-44,!0);let f=44;const X=Math.pow(2,8*c-1)-1;for(let j=0;j<i;j++)for(let v=0;v<l;v++){const b=m.getChannelData(v)[j]*X;if(c===2)n.setInt16(f,b,!0),f+=2;else{const U=Math.max(-8388608,Math.min(8388607,b));n.setUint8(f,U>>0&255),n.setUint8(f+1,U>>8&255),n.setUint8(f+2,U>>16&255),f+=3}}const ee=new Blob([o],{type:"audio/wav"}),_=URL.createObjectURL(ee),M=document.createElement("a");M.href=_,M.download=`${w!==null?g[w].name.replace(/\.[^.]+$/,""):"audio"}_${A}.wav`,M.click(),URL.revokeObjectURL(_),alert("Audio exported successfully!")}catch(t){console.error("Export error:",t),alert("Failed to export audio.")}},J=(t,a,l)=>{const i=t.createGain();i.gain.value=S,a.connect(i);let c=i;if(p==="radio"){const s=t.createBiquadFilter();s.type="bandpass",s.frequency.value=1e3,s.Q.value=2;const r=t.createWaveShaper(),o=44100,n=new Float32Array(o);for(let d=0;d<o;d++){const f=d*2/o-1;n[d]=53*f*20*Math.PI/180/(Math.PI+50*Math.abs(f))}r.curve=n,r.oversample="4x",c.connect(s),s.connect(r),c=r}else if(p==="robot"){const s=t.createDelay(.1);s.delayTime.value=.03;const r=t.createGain();r.gain.value=.3,c.connect(s),s.connect(r),r.connect(s);const o=t.createGain();o.gain.value=.5,s.connect(o),c=o}else if(p==="ethereal"){const s=t.createDelay(.5),r=t.createDelay(.5),o=t.createGain();s.delayTime.value=.15,r.delayTime.value=.35,o.gain.value=.4,c.connect(s),s.connect(r),r.connect(o),o.connect(s);const n=t.createGain();n.gain.value=.6,s.connect(n),r.connect(n),c=n}if(y>0){const s=t.createDelay(1),r=t.createGain(),o=t.createGain();s.delayTime.value=.3,r.gain.value=y*.5,o.gain.value=y,c.connect(s),s.connect(r),r.connect(s),s.connect(o),o.connect(l),c.connect(l)}else c.connect(l)},K=t=>{if(!t||!x.current)return;const a=x.current;R.current&&R.current.stop();const l=a.createBufferSource();l.buffer=t,l.playbackRate.value=C;const i=a.createGain();i.gain.value=1,J(a,l,i),h.current?(i.connect(h.current),h.current.connect(a.destination)):i.connect(a.destination),R.current=l,l.start(),D(!0),l.onended=()=>D(!1)};return e.jsxs("div",{className:"h-full flex flex-col bg-forge-dark overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-700 bg-forge-panel flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-500/20 rounded-xl border border-purple-500/30",children:e.jsx(z,{className:"w-6 h-6 text-purple-400"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:["Audio Studio ",e.jsx("span",{className:"text-[10px] bg-slate-800 px-2 py-0.5 rounded text-slate-400 border border-slate-700",children:"PRO"})]}),e.jsx("p",{className:"text-xs text-slate-400 font-mono",children:"Mod Audio Creation & Processing"})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-slate-800 rounded-full border border-slate-600 text-xs text-slate-300",children:[e.jsx(q,{className:"w-3 h-3 text-purple-400"}),"Audio Ready"]})})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col p-6 gap-6 overflow-y-auto",children:[e.jsxs("div",{className:"bg-forge-panel border border-slate-700 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-200 flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"})," Audio Files"]}),e.jsxs("button",{onClick:()=>{var t;return(t=N.current)==null?void 0:t.click()},className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-lg text-sm font-bold flex items-center gap-2 transition-colors",children:[e.jsx(re,{className:"w-4 h-4"})," Load Audio"]}),e.jsx("input",{ref:N,type:"file",accept:"audio/*",onChange:Y,className:"hidden"})]}),g.length>0?e.jsx("div",{className:"space-y-2",children:g.map((t,a)=>e.jsxs("div",{onClick:()=>{k(a),V(t.buffer)},className:`p-3 rounded-lg border cursor-pointer transition-all flex justify-between items-center ${w===a?"bg-purple-500/20 border-purple-500 shadow-md":"bg-slate-900 border-slate-700 hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(E,{className:"w-4 h-4 text-purple-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-bold text-slate-200",children:t.name}),e.jsxs("div",{className:"text-xs text-slate-400",children:[t.duration.toFixed(2),"s"]})]})]}),e.jsx("button",{onClick:l=>{l.stopPropagation(),G(g.filter((i,c)=>c!==a)),w===a&&k(null)},className:"p-2 hover:bg-red-500/20 text-red-400 rounded transition-colors",children:e.jsx(ne,{className:"w-4 h-4"})})]},a))}):e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(E,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:'No audio files loaded. Click "Load Audio" to begin.'})]})]}),e.jsxs("div",{className:"flex-1 bg-black rounded-xl border border-slate-700 relative overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"absolute top-4 left-4 z-10 text-xs font-mono text-slate-500 flex items-center gap-2",children:[e.jsx(q,{className:"w-3 h-3"})," FREQUENCY ANALYZER"]}),e.jsx("canvas",{ref:F,width:800,height:300,className:"w-full h-full opacity-90"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black to-transparent flex justify-center items-end pb-8",children:e.jsx("button",{onClick:()=>K(m),disabled:!m||I,className:"w-16 h-16 rounded-full bg-white text-black flex items-center justify-center hover:scale-105 transition-transform disabled:opacity-20 disabled:scale-100 shadow-[0_0_30px_rgba(255,255,255,0.3)]",children:e.jsx(oe,{className:"w-6 h-6 fill-current"})})})]})]}),e.jsxs("div",{className:"w-80 bg-slate-900 border-l border-slate-800 p-6 flex flex-col gap-4 overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"})," Quality"]}),e.jsxs("select",{value:A,onChange:t=>Q(t.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-200 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"16bit-22k",children:"16-bit 22 kHz (Dialogue)"}),e.jsx("option",{value:"16bit-44k",children:"16-bit 44.1 kHz (Standard)"}),e.jsx("option",{value:"24bit-48k",children:"24-bit 48 kHz (High-Fidelity)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 block",children:["Volume: ",(S*100).toFixed(0),"%"]}),e.jsx("input",{type:"range",min:"0",max:"200",value:S*100,onChange:t=>$(parseInt(t.target.value)/100),className:"w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 block",children:["Pitch: ",(C*100).toFixed(0),"%"]}),e.jsx("input",{type:"range",min:"50",max:"200",value:C*100,onChange:t=>O(parseInt(t.target.value)/100),className:"w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 block",children:["Echo: ",(y*100).toFixed(0),"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:y*100,onChange:t=>H(parseInt(t.target.value)/100),className:"w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"})," Effects"]}),[{id:"none",icon:ae,label:"Clean",desc:"No effects"},{id:"radio",icon:se,label:"Radio",desc:"Bandpass + Drive"},{id:"robot",icon:le,label:"Robot",desc:"Delay + Resonance"},{id:"ethereal",icon:z,label:"Reverb",desc:"Ethereal Space"}].map(t=>e.jsx("button",{onClick:()=>T(t.id),className:`w-full p-3 rounded-lg border transition-all text-left mb-2 ${p===t.id?"bg-purple-500/20 border-purple-500 shadow-md":"bg-slate-800 border-slate-700 hover:border-slate-600"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t.icon,{className:"w-4 h-4 text-purple-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-slate-200 text-sm",children:t.label}),e.jsx("div",{className:"text-xs text-slate-500",children:t.desc})]})]})},t.id))]}),e.jsxs("div",{className:"mt-auto pt-6 border-t border-slate-800 space-y-3",children:[e.jsxs("button",{onClick:Z,disabled:!m,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:opacity-30 disabled:cursor-not-allowed text-white rounded-lg flex items-center justify-center gap-2 text-sm font-bold transition-colors",children:[e.jsx(ce,{className:"w-4 h-4"}),"Export to WAV"]}),e.jsxs("button",{onClick:()=>W(prompt("Enter mod folder path:")||""),className:"w-full py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg flex items-center justify-center gap-2 text-xs font-bold transition-colors",children:[e.jsx(ie,{className:"w-4 h-4"}),"Set Mod Path"]}),L&&e.jsx("div",{className:"text-xs text-slate-400 bg-slate-800 p-2 rounded border border-slate-700 break-all",children:L})]})]})]})]})};export{ye as default};
