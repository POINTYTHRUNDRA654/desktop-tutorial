import{c as $,r,j as e,x as M,C as o,S as v,n as O}from"./index-CEqdjNqX.js";import{e as q}from"./MossyErrorReporter-CZgmcvLs.js";import{L as w}from"./lock-DPhdJk5y.js";import{E as u}from"./eye-Dh4PfBEc.js";import{D as S}from"./database-V2h3OpNj.js";import{S as U}from"./share-2-ElIvpBDQ.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],k=$("eye-off",F),V=()=>{const[i,A]=r.useState({keepLocalOnly:!0,shareModProjectData:!1,shareScriptPatterns:!1,shareMeshOptimizations:!1,shareBugReports:!1,contributeToKnowledgeBase:!1,allowAnalytics:!1}),[_,I]=r.useState({localStorageSize:"Calculating...",encryptionEnabled:!0}),[m,P]=r.useState(null),[b,g]=r.useState("idle"),[x,f]=r.useState(""),[j,L]=r.useState(!1),[C,c]=r.useState(!1),[h,y]=r.useState(""),[N,T]=r.useState(!1),[K,d]=r.useState(!1);r.useEffect(()=>{const t=localStorage.getItem("mossy_privacy_settings");if(t)try{A(JSON.parse(t))}catch(l){console.error("Failed to load privacy settings:",l)}const a=localStorage.getItem("openai_api_key");a&&(f(a),c(!0));const s=localStorage.getItem("google_api_key");s&&(y(s),d(!0)),B()},[]);const B=()=>{var t;try{let a=0;for(let l in localStorage)localStorage.hasOwnProperty(l)&&(a+=((t=localStorage.getItem(l))==null?void 0:t.length)||0);const s=(a/1024/1024).toFixed(2);I(l=>({...l,localStorageSize:`${s} MB`}))}catch{I(s=>({...s,localStorageSize:"Unable to calculate"}))}},E=t=>{const a={...i,[t]:!i[t]};A(a),g("saving"),setTimeout(()=>{localStorage.setItem("mossy_privacy_settings",JSON.stringify(a)),g("saved"),setTimeout(()=>g("idle"),2e3)},300)},z=()=>{try{const t={settings:i,exportDate:new Date().toISOString(),version:"1.0"},a=JSON.stringify(t,null,2),s=new Blob([a],{type:"application/json"}),l=URL.createObjectURL(s),p=document.createElement("a");p.href=l,p.download=`mossy-privacy-settings-${Date.now()}.json`,p.click(),URL.revokeObjectURL(l)}catch(t){console.error("Failed to export data:",t)}},R=()=>{confirm("Are you absolutely sure? This will delete all local data and cannot be undone.")&&confirm("This is your final warning. All your project data will be lost.")&&(localStorage.clear(),location.reload())},G=[{title:"Data Storage",description:"How your data is stored on your computer",icon:e.jsx(S,{className:"w-5 h-5"}),settings:[{id:"keepLocalOnly",label:"Keep All Data Local",description:"Store all project data, conversations, and learning exclusively on your computer. Nothing is ever sent to external servers.",hint:"Recommended for maximum privacy",icon:e.jsx(w,{className:"w-5 h-5"})}]},{title:"Knowledge Base Contributions",description:"Help the Mossy community by sharing anonymized insights",icon:e.jsx(U,{className:"w-5 h-5"}),settings:[{id:"contributeToKnowledgeBase",label:"Contribute to Shared Knowledge Base",description:"Share script patterns, mesh techniques, and modding solutions you discover. This helps all Mossy users get better recommendations.",hint:"No personal data is included - only patterns and techniques",icon:e.jsx(S,{className:"w-5 h-5"})},{id:"shareScriptPatterns",label:"Share Script Patterns",description:"Contribute Papyrus script patterns and coding techniques you develop.",hint:'Requires "Contribute to Knowledge Base" to be enabled',icon:e.jsx(v,{className:"w-5 h-5"}),dependsOn:"contributeToKnowledgeBase"},{id:"shareMeshOptimizations",label:"Share Mesh Optimization Techniques",description:"3D mesh optimization methods and best practices you discover.",hint:'Requires "Contribute to Knowledge Base" to be enabled',icon:e.jsx(v,{className:"w-5 h-5"}),dependsOn:"contributeToKnowledgeBase"}]},{title:"Quality & Support",description:"Help improve Mossy for everyone",icon:e.jsx(M,{className:"w-5 h-5"}),settings:[{id:"shareBugReports",label:"Share Bug Reports",description:"Send information about bugs and errors you encounter. This helps us fix issues faster.",hint:"Bug reports are reviewed for privacy before analysis",icon:e.jsx(O,{className:"w-5 h-5"})}]}];return e.jsx("div",{className:"min-h-screen bg-slate-950 p-8 pb-20",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(M,{className:"w-8 h-8 text-red-400"}),e.jsx("h1",{className:"text-4xl font-bold text-white",children:"Privacy & Data Settings"})]}),e.jsx("p",{className:"text-slate-400",children:"Your data privacy and security are fundamental rights. Control exactly what information Mossy collects, stores, and shares."})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl overflow-hidden mb-8",children:[e.jsxs("div",{className:"bg-slate-800 border-b border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"text-emerald-400",children:e.jsx(w,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"API Keys"})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Manage API keys for AI features. Keys are stored locally and encrypted."})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"OpenAI API Key (for video transcription)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:j?"text":"password",value:x,onChange:t=>{f(t.target.value),c(!1)},placeholder:"sk-...",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500"}),e.jsx("button",{onClick:()=>L(!j),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:j?e.jsx(k,{className:"w-4 h-4"}):e.jsx(u,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>{x.trim()&&(localStorage.setItem("openai_api_key",x.trim()),c(!0),setTimeout(()=>c(!1),3e3))},className:`px-4 py-2 rounded-lg font-medium transition-colors ${C?"bg-emerald-600 text-white":"bg-emerald-500 hover:bg-emerald-600 text-white"}`,children:C?"✓ Saved":"Save"}),x&&e.jsx("button",{onClick:()=>{localStorage.removeItem("openai_api_key"),f(""),c(!1)},className:"px-4 py-2 rounded-lg font-medium bg-red-500 hover:bg-red-600 text-white transition-colors",children:"Clear"})]}),e.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["Get your API key from ",e.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-emerald-400 hover:underline",children:"platform.openai.com/api-keys"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Google AI API Key (for voice chat)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:N?"text":"password",value:h,onChange:t=>{y(t.target.value),d(!1)},placeholder:"AIza...",className:"w-full bg-slate-800 border border-slate-600 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:()=>T(!N),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:N?e.jsx(k,{className:"w-4 h-4"}):e.jsx(u,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>{h.trim()&&(localStorage.setItem("google_api_key",h.trim()),d(!0),setTimeout(()=>d(!1),3e3))},className:`px-4 py-2 rounded-lg font-medium transition-colors ${K?"bg-blue-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:K?"✓ Saved":"Save"}),h&&e.jsx("button",{onClick:()=>{localStorage.removeItem("google_api_key"),y(""),d(!1)},className:"px-4 py-2 rounded-lg font-medium bg-red-500 hover:bg-red-600 text-white transition-colors",children:"Clear"})]}),e.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["Get your API key from ",e.jsx("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"makersuite.google.com/app/apikey"}),e.jsx("br",{}),e.jsx("strong",{children:"Note:"})," Make sure the API key has access to the Gemini Live API. If voice chat still fails, try creating a new API key."]})]})]})]}),e.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-400/30 rounded-xl p-6 mb-8",children:[e.jsxs("h2",{className:"font-bold text-emerald-200 mb-3 flex items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5"})," Mossy's Privacy Promise"]}),e.jsxs("ul",{className:"space-y-2 text-slate-300 text-sm",children:[e.jsxs("li",{className:"flex gap-3",children:[e.jsx(o,{className:"w-4 h-4 text-emerald-400 flex-shrink-0 mt-0.5"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-bold",children:"Your data is yours."})," We never sell or monetize your information."]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx(o,{className:"w-4 h-4 text-emerald-400 flex-shrink-0 mt-0.5"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-bold",children:"Default privacy."})," We ask permission before sharing anything."]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx(o,{className:"w-4 h-4 text-emerald-400 flex-shrink-0 mt-0.5"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-bold",children:"Local first."})," Your computer is the primary storage location."]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx(o,{className:"w-4 h-4 text-emerald-400 flex-shrink-0 mt-0.5"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-bold",children:"Transparent sharing."})," Any shared data is anonymized and reviewed."]})]})]})]}),e.jsx("div",{className:"space-y-8",children:G.map((t,a)=>e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-800 border-b border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"text-emerald-400",children:t.icon}),e.jsx("h2",{className:"text-xl font-bold text-white",children:t.title})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:t.description})]}),e.jsx("div",{className:"divide-y divide-slate-700",children:t.settings.map(s=>{var D;const l=i[s.id],n=!(!s.dependsOn||i[s.dependsOn]);return e.jsxs("div",{className:`p-6 transition-colors ${n?"bg-slate-950/50 opacity-60":"bg-slate-900 hover:bg-slate-800"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:n?"text-slate-600":"text-emerald-400",children:s.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"font-bold text-slate-200 cursor-pointer block mb-1 flex items-center gap-2",children:[s.label,n&&e.jsxs("span",{className:"text-xs font-normal text-slate-500",children:["(requires ",(D=s.dependsOn)==null?void 0:D.replace(/([A-Z])/g," $1"),")"]})]}),e.jsx("p",{className:"text-slate-400 text-sm mb-2",children:s.description}),s.hint&&e.jsxs("p",{className:"text-xs text-emerald-600/80 flex items-center gap-1",children:[e.jsx(u,{className:"w-3 h-3"})," ",s.hint]})]})]}),e.jsx("button",{onClick:()=>!n&&E(s.id),disabled:n,className:`w-12 h-7 rounded-full flex items-center px-1 flex-shrink-0 transition-all ${l?"bg-emerald-600":"bg-slate-700"} ${n?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white transition-transform ${l?"translate-x-5":""}`})})]}),e.jsxs("button",{onClick:()=>P(m===s.id?null:s.id),className:"text-xs text-emerald-500 hover:text-emerald-400 font-bold ml-8 flex items-center gap-1",children:[m===s.id?e.jsx(k,{className:"w-3 h-3"}):e.jsx(u,{className:"w-3 h-3"}),m===s.id?"Hide details":"Learn more"]}),m===s.id&&e.jsxs("div",{className:"mt-4 ml-8 pt-4 border-t border-slate-700 text-xs text-slate-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-300",children:"What gets shared:"})," Only anonymized patterns and techniques, never your personal project details."]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-300",children:"How it helps:"})," Shared knowledge improves Mossy's recommendations for all users in the community."]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-bold text-slate-300",children:"Can I change this?"})," Yes, anytime. Toggle this setting off to stop contributions immediately."]})]})]},s.id)})})]},a))}),e.jsxs("div",{className:"mt-8 bg-slate-900 border border-slate-700 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-800 border-b border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(v,{className:"w-5 h-5 text-blue-400"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"Data Management"})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Control your local data and backups"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-slate-300 mb-2",children:[e.jsx("span",{className:"font-bold",children:"Local Storage Used:"})," ",_.localStorageSize]}),e.jsx("p",{className:"text-xs text-slate-500",children:"This includes project data, conversations, and settings stored on your computer."})]}),e.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-400/30 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-emerald-200 mb-2 flex items-center gap-2",children:[e.jsx(o,{className:"w-4 h-4"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-bold",children:"Encryption:"})," Enabled"]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Your local data is encrypted at rest to protect sensitive information."})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-700",children:[e.jsxs("button",{onClick:z,className:"w-full px-4 py-3 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-200 text-sm font-bold transition-colors flex items-center justify-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),"Export My Data"]}),e.jsxs("button",{onClick:()=>q(),className:"w-full px-4 py-3 rounded-lg bg-orange-900/30 hover:bg-orange-900/50 text-orange-300 text-sm font-bold transition-colors border border-orange-700/50 flex items-center justify-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"}),"Export Mossy Error Logs"]}),e.jsxs("button",{onClick:R,className:"w-full px-4 py-3 rounded-lg bg-red-900/30 hover:bg-red-900/50 text-red-300 text-sm font-bold transition-colors border border-red-700/50 flex items-center justify-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),"Delete All Local Data"]})]})]})]}),b!=="idle"&&e.jsxs("div",{className:"fixed bottom-8 right-8 bg-slate-800 border border-emerald-400 rounded-lg p-4 flex items-center gap-3",children:[b==="saving"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-emerald-400 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-slate-300",children:"Saving settings..."})]}),b==="saved"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{className:"text-emerald-300",children:"Settings saved"})]})]})]})})};export{V as default};
